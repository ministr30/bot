# Telegram Bot для напоминаний о массаже

Этот бот позволяет клиентам получать напоминания о предстоящих процедурах и подтверждать/отменять запись через Telegram. Привязка осуществляется по номеру телефона.

## Установка

1. Установите зависимости:
```bash
pip install -r requirements.txt
```

2. Создайте файл `.env` с переменными окружения:
```env
TELEGRAM_BOT_TOKEN=your_telegram_bot_token
SUPABASE_URL=your_supabase_url
SUPABASE_KEY=your_supabase_key
```

## Получение Telegram Bot Token

1. Найдите @BotFather в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте полученный токен в переменную `TELEGRAM_BOT_TOKEN`

## Запуск

```bash
python telegram_bot.py
```

## Как работает бот

- При первом запуске бот просит пользователя поделиться номером телефона для идентификации.
- Если номер найден в базе — Telegram-аккаунт клиента привязывается к существующему клиенту.
- Если номер не найден — бот просит ввести имя и создает нового клиента в Supabase.
- После привязки клиент будет получать напоминания о предстоящих процедурах за 24 часа до записи.
- В напоминании есть кнопки для подтверждения, отмены или переноса записи.
- При подтверждении/отмене статус записи обновляется в Supabase.
- При запросе переноса бот отправляет контакт администратора для связи.

## Функциональность

- Привязка Telegram-аккаунта к клиенту по номеру телефона
- Автоматическая отправка напоминаний за 24 часа до процедуры
- Кнопки для подтверждения, отмены, переноса записи
- Интеграция с Supabase (PostgreSQL)
- Логирование ошибок

## Безопасность

- Все токены хранятся в переменных окружения
- Валидация входных данных
- Логирование ошибок